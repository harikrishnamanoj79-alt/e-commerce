{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="container py-5">

    <!-- PROPERTY TITLE -->
    <div class="mb-4">
        <h2 class="fw-bold">{{ property.title }}</h2>
        <p class="text-muted">
            <i class="bi bi-geo-alt"></i> {{ property.location }}
        </p>
    </div>

    <div class="row">

        <!-- LEFT SIDE -->
        <div class="col-lg-8">

            <!-- MAIN IMAGE -->
            {% if property.featured_image %}
            <div class="mb-4">
                <img src="{{ property.featured_image.url }}" class="img-fluid rounded shadow-sm w-100"
                    style="height:450px; object-fit:cover;">
            </div>
            {% endif %}

            <!-- PROPERTY DETAILS -->
            <!-- PROPERTY DETAILS CARD -->
            <section class="property-detail-section py-5">
                <div class="container">

                    <div class="property-detail-card p-4 p-md-5">

                        <!-- Category + Price -->
                        <div class="d-flex flex-column flex-md-row 
                        justify-content-between 
                        align-items-start align-items-md-center 
                        mb-4">

                            <span class="badge category-badge mb-3 mb-md-0">
                                {{ property.category.name }}
                            </span>

                            <h3 class="fw-bold property-price mb-0">
                                â‚¹ {{ property.price }}
                            </h3>
                        </div>

                        <!-- Property Stats -->
                        <div class="row text-center property-stats mb-4">
                            <div class="col-4">
                                <strong>{{ property.bedrooms }}</strong><br>
                                <small>Beds</small>
                            </div>
                            <div class="col-4">
                                <strong>{{ property.bathrooms }}</strong><br>
                                <small>Baths</small>
                            </div>
                            <div class="col-4">
                                <strong>{{ property.area }}</strong><br>
                                <small>Sqft</small>
                            </div>
                        </div>

                        <hr class="divider">

                        <!-- Description -->
                        <h5 class="fw-bold mb-3">Description</h5>
                        <p class="property-description">
                            {{ property.description }}
                        </p>

                    </div>

                </div>
            </section>

            <!-- GOOGLE MAP -->
            {% if property.latitude and property.longitude %}
            <div class="card shadow-sm mb-4">
                <div class="card-body">
                    <h5 class="fw-bold mb-3">Location Map</h5>

                    <iframe width="100%" height="350" style="border:0" loading="lazy" allowfullscreen
                        src="https://www.google.com/maps?q={{ property.latitude }},{{ property.longitude }}&z=14&output=embed">
                    </iframe>
                </div>
            </div>
            {% endif %}

        </div>


        <!-- RIGHT SIDE (CONTACT BOX) -->
        <div class="col-lg-4">

            <div class="card shadow-sm sticky-top" style="top:100px;">
                <div class="card-body">

                    <h5 class="fw-bold mb-3">Contact Agent</h5>

                    <form method="POST">
                        {% csrf_token %}

                        <input type="text" class="form-control mb-3" placeholder="Your Name" name="name" required>

                        <input type="email" class="form-control mb-3" placeholder="Your Email" name="email" required>

                        <input type="text" class="form-control mb-3" placeholder="Phone Number" name="phone" required>

                        <textarea class="form-control mb-3" rows="4" placeholder="Message" name="message"></textarea>

                        <button type="submit" class="btn btn-dark w-100">
                            Send Inquiry
                        </button>
                    </form>

                </div>
            </div>

        </div>

    </div>

</div>

{% endblock %}